<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prédictions des Actions</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body class="bg-light">

    <div class="container mt-5">
        <h1 class="text-center mb-4">Analyse et Prédiction des Actions</h1>

        
        <!-- Ajout du titre "Magnificent Seven" -->
        <h2 class="text-center mt-4">Magnificent Seven</h2>

        <form method="POST" action="/" class="bg-white p-4 shadow rounded">
            <div class="mb-3">
                <label for="ticker" class="form-label">Sélectionnez un ticker :</label>
                <select name="ticker" id="ticker" class="form-select">
                    {% for ticker in tickers %}
                    <option value="{{ ticker }}" {% if ticker == selected_ticker %}selected{% endif %}>
                        {{ ticker }}
                    </option>
                    {% endfor %}
                </select>
            </div>

            <div class="mb-3">
                <label for="timeframe" class="form-label">Sélectionnez une période :</label>
                <select name="timeframe" id="timeframe" class="form-select">
                    <option value="1D" {% if timeframe == "1D" %}selected{% endif %}>1 Jour</option>
                    <option value="1W" {% if timeframe == "1W" %}selected{% endif %}>1 Semaine</option>
                    <option value="1M" {% if timeframe == "1M" %}selected{% endif %}>1 Mois</option>
                    <option value="1Y" {% if timeframe == "1Y" %}selected{% endif %}>1 An</option>
                    <option value="max" {% if timeframe == "max" %}selected{% endif %}>Max</option>
                </select>
            </div>

            <button type="submit" class="btn btn-primary w-100">Afficher les Graphiques</button>
        </form>


        

        {% if real_price_img_path or predicted_dividend_img_path %}
        <div class="row mt-5">
            <div class="col-md-6">
                <h2 class="text-center">Prix de Clôture Réels</h2>
                <img src="{{ url_for('static', filename='real_price_plot.png') }}" alt="Prix Réels" class="img-fluid shadow rounded">
            </div>
            <div class="col-md-6">
                <h2 class="text-center">Prédiction des Dividendes</h2>
                <img src="{{ url_for('static', filename='predicted_dividend_plot.png') }}" alt="Dividendes Prévus" class="img-fluid shadow rounded">
            </div>
        </div>

        <!-- Ajout des graphiques pour les 5 plus grandes entreprises françaises -->
        <h2 class="text-center mt-5">Top 5 Entreprises Françaises</h2>
        <form method="POST" action="/" class="bg-white p-4 shadow rounded mt-4">
            <div class="mb-3">
                <label for="ticker_top5" class="form-label">Sélectionnez un ticker du Top 5 :</label>
                <select name="ticker_top5" id="ticker_top5" class="form-select">
                    {% for ticker in top_5_fr_tickers %}
                    <option value="{{ ticker }}" {% if ticker == selected_ticker %}selected{% endif %}>
                        {{ ticker }}
                    </option>
                    {% endfor %}
                </select>
            </div>

            <div class="mb-3">
                <label for="timeframe_top5" class="form-label">Sélectionnez une période :</label>
                <select name="timeframe_top5" id="timeframe_top5" class="form-select">
                    <option value="1D" {% if timeframe == "1D" %}selected{% endif %}>1 Jour</option>
                    <option value="1W" {% if timeframe == "1W" %}selected{% endif %}>1 Semaine</option>
                    <option value="1M" {% if timeframe == "1M" %}selected{% endif %}>1 Mois</option>
                    <option value="1Y" {% if timeframe == "1Y" %}selected{% endif %}>1 An</option>
                    <option value="max" {% if timeframe == "max" %}selected{% endif %}>Max</option>
                </select>
            </div>

            <button type="submit" class="btn btn-warning w-100">Afficher les Graphiques</button>
        </form>

        <div class="row mt-5">
            {% for img_path in top_5_closing_img_paths %}
            <div class="col-md-6">
                <img src="{{ url_for('static', filename='real_price_top5.png') }}" alt="Graphique Top 5" class="img-fluid shadow rounded">
            </div>
            {% endfor %}
        </div>
        {% endif %}

        {% if error_message %}
        <div class="alert alert-danger mt-4 text-center">
            <p>{{ error_message }}</p>
        </div>
        {% endif %}
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
